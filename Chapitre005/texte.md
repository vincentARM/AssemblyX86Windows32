# Chapitre 5 : affichage décimal du contenu d’un registre.
Aux chapitres précédents, nous avons vu comment afficher un message stocké dans le segment .data de la mémoire. Maintenant nous allons voir dans le programme [afficherRegistre.asm](https://github.com/vincentARM/AssemblyX86Windows32/blob/main/Chapitre005/afficherRegistre.asm) comment afficher en décimal le contenu d’un registre. <br>
La première idée est de stocker les 4 octets du registre dans une zone en mémoire, de mettre un zéro final pour indiquer qu’il s’agit d’une chaîne puis appeler nos fonctions d’affichage en leur passant cette chaîne. <br>
Cette solution n’est pas valable car je vous ai indiqué qu’un registre contenait 32 positions qui stockaient un nombre en binaire alors que les fonctions d’affichage demandaient une suite de caractères Ascii. <br>
Il nous faut donc convertir le contenu du registre en caractères ascii en utilisant la méthode des divisions successives par 10 comme vous l’avez sûrement appris au lycée. <br>
Supposons que le registre contiennent la valeur 1234 (bien sûr sa représentation en binaire est : 
010011010010) nous la divisons par 10 ce qui donne 123 avec un reste de 4. Nous ajoutons à ce reste 48 ce qui donne 52 qui est le code ascii de 4 (vous pouvez le vérifier facilement sur internet!!)
Maintenant nous divisons 123 par 10 ce qui donne 12 avec un reste de 3 auquel nous ajoutons toujours 48 ce qui donne 41 code Ascii de 3. Et nous continuons pour avoir les restes 2 et 1.<br>
Vous remarquerez que nous obtenons chaque chiffre du nombre mais en partant de la fin ce qui va nous obliger à stocker en mémoire ces chiffres en partant de la fin de la zone réservée à la conversion.<br>
Dans le corps principal du programme nous passons la valeur 1234 comme premier paramètre et l’adresse de la zone de conversion en deuxième paramètre à la fonction de conversion décimale conversion10. Ensuite nous affichons un message et le contenu de la zone de conversion avec les fonctions précédentes.<br>
Dans la fonction de conversion nous récupérons les 2 paramètres et nous commençons par mettre la valeur 0 à la fin de la zone de conversion. Puis nous entrons  dans une boucle qui va diviser successivement le registre eax par la valeur 10 contenue dans le registre ebx. Le reste est récupéré dans le registre edx auquel nous ajoutons la valeur 48 qui astuce représente le code ascii du caractère ‘0’. Nous stockons ce résultat dans la zone de conversion. Et la boucle s’arrête quand la valeur du dividende est égale à 0. Il est inutile de continuer car nous aurions que des zéros à stocker. <br>
Il nous reste une opération à effectuer, en effet le résultat de la conversion est stocké en fin de zone et donc il nous faut recopier un à un tous les caractères du résultat en début de zone pour avoir un résultat adéquat.
L’exécution donne le résultat attendu, et maintenant nous avons tout ce qu’il faut (enfin presque) pour regarder plus en détail les opérations sur les registres dans le chapitre suivant.
